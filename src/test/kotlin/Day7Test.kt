import io.kotest.core.spec.style.ShouldSpec
import io.kotest.matchers.shouldBe

class Day7Test : ShouldSpec({
    context("with given input") {
        should("return test value") {
            val input = """
            .......S.......
            ...............
            .......^.......
            ...............
            ......^.^......
            ...............
            .....^.^.^.....
            ...............
            ....^.^...^....
            ...............
            ...^.^...^.^...
            ...............
            ..^...^.....^..
            ...............
            .^.^.^.^.^...^.
            ...............
            """.trimIndent().trimStart('\n')

            val solvedDiagram = Day7().solveDiagram(input)
            solvedDiagram shouldBe """
            .......S.......
            .......|.......
            ......|^|......
            ......|.|......
            .....|^|^|.....
            .....|.|.|.....
            ....|^|^|^|....
            ....|.|.|.|....
            ...|^|^|||^|...
            ...|.|.|||.|...
            ..|^|^|||^|^|..
            ..|.|.|||.|.|..
            .|^|||^||.||^|.
            .|.|||.||.||.|.
            |^|^|^|^|^|||^|
            |.|.|.|.|.|||.|
            """.trimIndent().trimStart('\n')

            val result = Day7().solve(input)

            result.first shouldBe 21
            result.second shouldBe 40.toBigInteger()
        }
        should("return final value") {
            val input = """
            ......................................................................S......................................................................
            .............................................................................................................................................
            ......................................................................^......................................................................
            .............................................................................................................................................
            .....................................................................^.^.....................................................................
            .............................................................................................................................................
            ....................................................................^...^....................................................................
            .............................................................................................................................................
            ...................................................................^.^.^.^...................................................................
            .............................................................................................................................................
            ..................................................................^...^.^.^..................................................................
            .............................................................................................................................................
            .................................................................^.^.^.^.^.^.................................................................
            .............................................................................................................................................
            ................................................................^.^...^.^.^.^................................................................
            .............................................................................................................................................
            ...............................................................^.^.^...^...^.^...............................................................
            .............................................................................................................................................
            ..............................................................^.^...^.^.^.^...^..............................................................
            .............................................................................................................................................
            .............................................................^.....^...^.^.^.^.^.............................................................
            .............................................................................................................................................
            ............................................................^.^.^.^.^...^.^.^...^............................................................
            .............................................................................................................................................
            ...........................................................^.....^.^.^.^...^...^.^...........................................................
            .............................................................................................................................................
            ..........................................................^.^...^.......^.^.^.^.^.^..........................................................
            .............................................................................................................................................
            .........................................................^.^.^.^.^.^.^.^.^.^...^.^.^.........................................................
            .............................................................................................................................................
            ........................................................^.......^.^.^.^...^.^...^.^.^........................................................
            .............................................................................................................................................
            .......................................................^.^.^.^...^.^...^...^...^...^.^.......................................................
            .............................................................................................................................................
            ......................................................^.^...^.^.^.^...^.....^.^.^.^.^.^......................................................
            .............................................................................................................................................
            .....................................................^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.....................................................
            .............................................................................................................................................
            ....................................................^.^.^...^.^.^.^...^.^...^.^...^...^.^....................................................
            .............................................................................................................................................
            ...................................................^.^.^.^.^.......^.^.^.^.^.^...^.^...^.^...................................................
            .............................................................................................................................................
            ..................................................^.......^...^.^.^...^.....^.^.........^.^..................................................
            .............................................................................................................................................
            .................................................^.^.^.^.^.^.^.^.^.^.^...^...^...^.^.....^.^.................................................
            .............................................................................................................................................
            ................................................^...^.^...^.^.^.......^.....^...^...^.....^.^................................................
            .............................................................................................................................................
            ...............................................^.^.^...^.^...^...^.....^...^.^.^.^.^...^.^.^.^...............................................
            .............................................................................................................................................
            ..............................................^.......^.^.^.^...^.^.....^...^.^.^.^.^.^.^.^.^.^..............................................
            .............................................................................................................................................
            .............................................^.^...^.^.^...^.^.^.^.^...^.^.^.^.........^.^.^.^.^.............................................
            .............................................................................................................................................
            ............................................^.^.^.^.....^...^.....^.^.^.^...^.^.^.^...^...^.^.^.^............................................
            .............................................................................................................................................
            ...........................................^.....^.^.^.......^.....^.^...^.^.^.^.^.^.^.^...^.^.^.^...........................................
            .............................................................................................................................................
            ..........................................^.^.^.^.^.^...^.^.^.....^.^.....^...^.^.^.^.....^.^.^...^..........................................
            .............................................................................................................................................
            .........................................^.^.^.^...............^.^.^...^.^.........^.^.^...^.^...^.^.........................................
            .............................................................................................................................................
            ........................................^.^.^.^.^.^.^...^.^.^...^...^.^.^.^.^.^.^.^...^.^.....^.^.^.^........................................
            .............................................................................................................................................
            .......................................^...^.^.^.^.^.^.^.^...^...^.^.^.......^.^.^.^.^.^.........^...^.......................................
            .............................................................................................................................................
            ......................................^.^.^.^.^.^...^.^.^.......^.....^...^.^.......^.^...^.^.^...^...^......................................
            .............................................................................................................................................
            .....................................^.^.^.^.^.....^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.....................................
            .............................................................................................................................................
            ....................................^...^.^.^.^.^...^.^.^.^.........^.^.^.^.^.^.^...^.^.^.^...^.^...^...^....................................
            .............................................................................................................................................
            ...................................^.^.^...^.^.^.^.^.^.......^.^.^.^.^...^.^.^.^.^.^.^.^...^.^...^.....^.^...................................
            .............................................................................................................................................
            ..................................^.^...^.......^.^.^.^...^...^.^.....^.......^.^.^...^...^.^.^.^.^.^.^.^.^..................................
            .............................................................................................................................................
            .................................^.^.....^...^.^.^...^...^.^.^.......^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.................................
            .............................................................................................................................................
            ................................^.....^.^.^...^.^...^...^...^.^.^.^...^.^.^.^...^.^...^.^.^.^...^.^.^...^...^................................
            .............................................................................................................................................
            ...............................^.^.^.^.^.......^...^.^...^...^.^.^.^.^.^...^.^.^.....^.^.^.^.^.......^.....^.^...............................
            .............................................................................................................................................
            ..............................^...^...^.....^.^...^.^.^.^...^.^.^...^.^...^.^.^.^.^.^...^...^.^.^.........^.^.^..............................
            .............................................................................................................................................
            .............................^.^.....^.....^...^.^.^.^...^.....^...^.^.^...^...^.^...^.^...^.^.^.^.^.^.^...^...^.............................
            .............................................................................................................................................
            ............................^.^.^...^.^...^.^.^...^.^.^...^.^.^.^.....^...^.^.^.^.....^.^.^...^.^.^.^.^.^.^.^...^............................
            .............................................................................................................................................
            ...........................^.^.^.......^.^.^.^.^...^.^.^.^.^...^.....^.^.^.^.^.^...^...^.^.^.^.^.^.^...^.^.^...^.^...........................
            .............................................................................................................................................
            ..........................^.^.....^...^.^.^...^...^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^...^...^.^...^.^.^...^.^.^..........................
            .............................................................................................................................................
            .........................^.^...^.^.^...^.^.^.^.^...^.^...^.............^.^.^.^.......^.^.^.^.^...^.^.^...^.^.^.^.^.^.........................
            .............................................................................................................................................
            ........................^.^.........^.^.^.^.^.^...^.......^...^.^.^...^.^.^.....^.^.^.......^.....^.^.^.^.^.^.^.^.^.^........................
            .............................................................................................................................................
            .......................^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.....^.^...^.^.^.^...^.^.^.^.......................
            .............................................................................................................................................
            ......................^.^.^.^.......^.^.^...^.^...^.^...^...^.^...^...^.....^.^...^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^......................
            .............................................................................................................................................
            .....................^.^.^.^...^...^...^.^.^.....^.^.^.^...^...^.^.^.^.^.........^.^.^...^.^.^.^.....^.^.^...^.^...^.^.^.....................
            .............................................................................................................................................
            ....................^.^.^...^...^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.....^...^.^.^.^.......^...^.^.^.^.^.^...^.^.^...^.^...^....................
            .............................................................................................................................................
            ...................^.^...^.^.^.^.^...^.^.^.^...^.^.^.^.^.^...^.^...^...^.^.^.^.......^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...................
            .............................................................................................................................................
            ..................^.^.^.^...^.....^.^...^...^.....^.....^.^...^...^...^.^.......^.........^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^..................
            .............................................................................................................................................
            .................^.^.^.^.^.^.^...^.^.^...^...^.^.^.^.^.^.^.^.^.....^.^...^.....^.^...^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.................
            .............................................................................................................................................
            ................^.......^.^.^.^...^.^...^.^.^.^.^.^.^.......^.^.^.^.^.....^.^.^.^.^.^.....^.^.^...^...^.^.^...^.^.....^.^.^.^................
            .............................................................................................................................................
            ...............^.^.^.^.^.^.......^.^.^.......^.^.^...^.^.....^.^.........^.........^.^...^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^...............
            .............................................................................................................................................
            ..............^.^.^.^.^.....^.^.^.^.^.....^.^.^.^.^.^.^...^.^...^...^.^.^...^.^.^...^...^...^.^.^.^.^.^.^.........^.^.^.^.^.^.^..............
            .............................................................................................................................................
            .............^.^.^.^.^.....^.^...^.^.^.....^.^.....^...^.^.....^.^.^...^.^.^.^...^...^.....^.^.^...^...^.^.....^.....^.....^...^.............
            .............................................................................................................................................
            ............^.^.....^.^.^.^.^.^.^.^.^.....^...^.^.....^.^.^.^.^...^...^.^.^.^.^.^.^...^...^.....^.........^.....^.^.^.^.^.^...^.^............
            .............................................................................................................................................
            ...........^.^...^.^.^.^...^.......^...^.^.^.^.....^.^.^.^.^.....^.^.^.^.^.^.....^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.......^.^...^...........
            .............................................................................................................................................
            ..........^...^.^.^.^.........^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.....^...^...^...^.^.^.^...^...^...^...^...^.......^...^...^.^...^.^..........
            .............................................................................................................................................
            .........^...^.^.^...^.^.^.^...^.^.^...^.^...^.^.^.^.^...^.^.^.^.^.^.^...^.^...^.....^.^.....^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.....^.^.........
            .............................................................................................................................................
            ........^.^...^.......^...^...^...^...^.........^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^...^.^...^.^...^.^.....^........
            .............................................................................................................................................
            .......^...^.^.....^.^.^.^.^.^.^...^...^.^.^.^.....^.^.^...^.^.^...^.^...^...^.^.^.^.^.^.^.^...^.^.^.^.^.....^.^.^.^...^.^.^.^.^.^.^.^.......
            .............................................................................................................................................
            ......^.^.^.........^.^.^...^...^.^...^.^.^.^...^.^...^...^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^...^.^.^.^.^.^.^.^......
            .............................................................................................................................................
            .....^.^.....^.^...^.^.^...^...^.^.^.........^.^.^...^.^...^.^.^.^.^.^.^...^...^.^.^.^...^.^...^.^.^.^.^.^.^.^.^...^.^...^.^...^.^.....^.....
            .............................................................................................................................................
            ....^.^.^.....^...^.^.^.^.....^.....^...^.......^.^...^...^...^.^.^.^.^.....^.^.....^.^...^...^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^...^.^...^....
            .............................................................................................................................................
            ...^.^...^.^...^.^.^.^...^.^.......^.^.^.^.^...^...^.^...^...^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^.^...^...
            .............................................................................................................................................
            ..^.^.^.^.^.....^...^.^.^.^...^.^...^...^.^.^.^...^...^...^.^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.^...^...^...^..
            .............................................................................................................................................
            .^.^...^.^.^...^.....^.^.^...^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^...^...^.^.^.....^.^...^...^.^.^.^.^.^.^.^.
            .............................................................................................................................................
            """.trimIndent().trimStart('\n')

            val solved = Day7().solveDiagram(input)
            println(solved)

            val result = Day7().solve(input)
            println(result)

            result.first shouldBe 1646
        }
    }
})